遇到的问题
===

1. 所有手机浏览器都不支持保存GIF图片

   我尝试了微信Webview、手机QQ浏览器、系统自带浏览器，都不能保存动态图片，一旦保存就成了只包含第一帧的静态图。直接打开DataURL也是没有办法保存的。

   解决方法：通过触发浏览器下载来获取图片。

1. 手机浏览器下载也很坑

   手机不支持HTML5的`a[download]`属性，而且POST请求下载文件会直接被屏蔽掉（各浏览器都如此），因此没有办法直接用JS触发下载。只能通过GET请求直接下载GIF。

   解决方法：用Python写了个简单的服务器，先用POST上传图片，然后通过302跳转到GET进行下载。即使如此，保存的文件扩展名还是`.jpg`。

1. 添加到微信很坑

   添加的时候如果扩展名不是`.jpg`根本找不到，所以下载的文件就让它假装是JPG格式好了。然后在添加的时候都是不会动的，只有在自定义表情里长按和发送出去的时候才能看到动态效果。
